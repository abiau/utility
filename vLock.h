#ifndef __VLOCK_H__
#define __VLOCK_H__

#include "vDefine.h"
#include "vCommon.h"

/*************************************************************************************/
/*************************************************************************************/

#define VLOCK_BASE \
	struct {\
		void          (*lock)           (void* self);\
		void          (*unlock)         (void* self);\
	}; 
	
/*************************************************************************************/
/*************************************************************************************/

typedef struct {
	/* method. */
	VLOCK_BASE; 
	/* data. */
	vmutex_t      mutex; 
} VLock; 

/*************************************************************************************/
/*************************************************************************************/

VLock* vlock_create ();
void   vlock_destroy (VLock* pLock);
void   vlock_lock (void* self);
void   vlock_unlock (void* self);

/*************************************************************************************/
/*************************************************************************************/

#endif  /* __VLOCK_H__ */

